<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gazette Insolvency Report</title>
<style>
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; line-height: 1.5; color: #1a1a1a; margin: 0; padding: 0; background: #f5f5f5; }
  .container { max-width: 800px; margin: 0 auto; background: #fff; }
  .header { background: #1a2332; color: #fff; padding: 24px 32px; }
  .header h1 { margin: 0 0 4px; font-size: 22px; font-weight: 600; }
  .header .date { color: #94a3b8; font-size: 14px; }
  .summary { padding: 20px 32px; background: #f8fafc; border-bottom: 1px solid #e2e8f0; display: flex; gap: 16px; flex-wrap: wrap; }
  .stat { text-align: center; padding: 8px 16px; }
  .stat .number { font-size: 28px; font-weight: 700; }
  .stat .label { font-size: 12px; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px; }
  .stat.high .number { color: #16a34a; }
  .stat.medium .number { color: #d97706; }
  .stat.low .number { color: #6b7280; }
  .section { padding: 16px 32px; }
  .section-title { font-size: 16px; font-weight: 600; margin: 16px 0 12px; padding-bottom: 8px; border-bottom: 2px solid; }
  .section-title.high { color: #16a34a; border-color: #16a34a; }
  .section-title.medium { color: #d97706; border-color: #d97706; }
  .section-title.low { color: #6b7280; border-color: #e5e7eb; }
  .notice { border: 1px solid #e2e8f0; border-radius: 8px; padding: 16px; margin-bottom: 12px; }
  .notice.high { border-left: 4px solid #16a34a; }
  .notice.medium { border-left: 4px solid #d97706; }
  .notice.low { border-left: 4px solid #e5e7eb; }
  .notice-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; }
  .company-name { font-size: 16px; font-weight: 600; color: #1a2332; }
  .score-badge { display: inline-block; padding: 2px 10px; border-radius: 12px; font-size: 12px; font-weight: 600; color: #fff; }
  .score-badge.high { background: #16a34a; }
  .score-badge.medium { background: #d97706; }
  .score-badge.low { background: #9ca3af; }
  .notice-meta { font-size: 13px; color: #64748b; margin-bottom: 8px; }
  .notice-meta span { margin-right: 16px; }
  .links { margin: 8px 0; }
  .links a { display: inline-block; margin-right: 12px; font-size: 13px; color: #2563eb; text-decoration: none; }
  .links a:hover { text-decoration: underline; }
  .ip-section { margin-top: 10px; padding: 10px 12px; background: #f8fafc; border-radius: 6px; }
  .ip-section h4 { margin: 0 0 6px; font-size: 13px; color: #475569; text-transform: uppercase; letter-spacing: 0.5px; }
  .ip-entry { font-size: 13px; margin-bottom: 4px; }
  .ip-entry .name { font-weight: 600; }
  .signals { margin-top: 8px; }
  .signal { font-size: 12px; color: #64748b; padding: 1px 0; }
  .signal:before { content: "â€¢ "; color: #94a3b8; }
  .footer { padding: 20px 32px; background: #f8fafc; border-top: 1px solid #e2e8f0; font-size: 12px; color: #94a3b8; text-align: center; }
  @media (max-width: 600px) {
    .header, .section, .footer, .summary { padding-left: 16px; padding-right: 16px; }
    .notice-header { flex-direction: column; }
  }
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>UK Gazette Insolvency Report</h1>
    <div class="date">{{ date }}</div>
  </div>

  <div class="summary">
    <div class="stat">
      <div class="number">{{ total_count }}</div>
      <div class="label">Total Notices</div>
    </div>
    <div class="stat high">
      <div class="number">{{ high_count }}</div>
      <div class="label">High Potential</div>
    </div>
    <div class="stat medium">
      <div class="number">{{ medium_count }}</div>
      <div class="label">Medium</div>
    </div>
    <div class="stat low">
      <div class="number">{{ low_count }}</div>
      <div class="label">Low / Skip</div>
    </div>
  </div>

  {% if high_opportunities %}
  <div class="section">
    <div class="section-title high">High Potential Opportunities ({{ high_count }})</div>
    {% for n in high_opportunities %}
    {% include "notice_card.html" %}
    {% endfor %}
  </div>
  {% endif %}

  {% if medium_opportunities %}
  <div class="section">
    <div class="section-title medium">Medium Potential ({{ medium_count }})</div>
    {% for n in medium_opportunities %}
    {% include "notice_card.html" %}
    {% endfor %}
  </div>
  {% endif %}

  {% if low_opportunities %}
  <div class="section">
    <div class="section-title low">Lower Potential ({{ low_count + skip_count }})</div>
    {% for n in low_opportunities %}
    {% include "notice_card.html" %}
    {% endfor %}
    {% for n in skip_opportunities %}
    {% include "notice_card.html" %}
    {% endfor %}
  </div>
  {% endif %}

  {% if not high_opportunities and not medium_opportunities and not low_opportunities and not skip_opportunities %}
  <div class="section">
    <p style="color: #64748b; text-align: center; padding: 40px 0;">No new insolvency notices found for this period.</p>
  </div>
  {% endif %}

  <div class="footer">
    This report is generated automatically from The London Gazette and Companies House public data.
    It is not financial or legal advice. Always conduct your own due diligence before contacting insolvency practitioners.
  </div>
</div>
</body>
</html>
